{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ewt-all-in-one-1/Desktop/Chat-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ewt-all-in-one-1/Desktop/Chat-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext}from\"react\";import{Link}from\"react-router-dom\";import{auth,db}from\"../firebase\";import{signOut}from\"firebase/auth\";import{updateDoc,doc}from\"firebase/firestore\";import{AuthContext}from\"../context/auth\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Navbar=function Navbar(){var history=useHistory();var _useContext=useContext(AuthContext),user=_useContext.user;var handleSignout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return updateDoc(doc(db,\"users\",auth.currentUser.uid),{isOnline:false});case 2:_context.next=4;return signOut(auth);case 4:history.replace(\"/login\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSignout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Messenger\"})}),/*#__PURE__*/_jsx(\"div\",{children:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleSignout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})})]});};export default Navbar;","map":{"version":3,"sources":["C:/Users/ewt-all-in-one-1/Desktop/Chat-app/src/components/Navbar.js"],"names":["React","useContext","Link","auth","db","signOut","updateDoc","doc","AuthContext","useHistory","Navbar","history","user","handleSignout","currentUser","uid","isOnline","replace"],"mappings":"+TAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,aAAzB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,SAAT,CAAoBC,GAApB,KAA+B,oBAA/B,CACA,OAASC,WAAT,KAA4B,iBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,6IAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CACA,gBAAiBR,UAAU,CAACO,WAAD,CAA3B,CAAQI,IAAR,aAAQA,IAAR,CAEA,GAAMC,CAAAA,aAAa,0FAAG,yJACdP,CAAAA,SAAS,CAACC,GAAG,CAACH,EAAD,CAAK,OAAL,CAAcD,IAAI,CAACW,WAAL,CAAiBC,GAA/B,CAAJ,CAAyC,CACtDC,QAAQ,CAAE,KAD4C,CAAzC,CADK,8BAIdX,CAAAA,OAAO,CAACF,IAAD,CAJO,QAKpBQ,OAAO,CAACM,OAAR,CAAgB,QAAhB,EALoB,sDAAH,kBAAbJ,CAAAA,aAAa,0CAAnB,CAOA,mBACE,oCACE,iCACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBADF,EADF,cAIE,qBACGD,IAAI,cACH,oCACE,KAAC,IAAD,EAAM,EAAE,CAAC,UAAT,qBADF,cAEE,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAEC,aAAjC,oBAFF,GADG,cAQH,wCACE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,mBAFF,GATJ,EAJF,GADF,CAsBD,CAjCD,CAmCA,cAAeH,CAAAA,MAAf","sourcesContent":["import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport { updateDoc, doc } from \"firebase/firestore\";\r\nimport { AuthContext } from \"../context/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n  const history = useHistory();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const handleSignout = async () => {\r\n    await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n      isOnline: false,\r\n    });\r\n    await signOut(auth);\r\n    history.replace(\"/login\");\r\n  };\r\n  return (\r\n    <nav>\r\n      <h3>\r\n        <Link to=\"/\">Messenger</Link>\r\n      </h3>\r\n      <div>\r\n        {user ? (\r\n          <div>\r\n            <Link to=\"/profile\">Profile</Link>\r\n            <button className=\"btn\" onClick={handleSignout}>\r\n              Logout\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Link to=\"/register\">Register</Link>\r\n            <Link to=\"/login\">Login</Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"]},"metadata":{},"sourceType":"module"}