{"version":3,"sources":["firebase.js","image1.jpg","components/User.js","components/MessageForm.js","components/Message.js","pages/Home.js","components/Loading.js","context/auth.js","components/Navbar.js","pages/Register.js","pages/Login.js","components/svg/Camera.js","components/svg/Delete.js","pages/Profile.js","components/PrivateRoute.js","pages/ClickModel.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","db","getFirestore","storage","getStorage","User","user1","user","selectUser","chat","user2","uid","useState","data","setData","useEffect","id","unsub","onSnapshot","doc","className","name","onClick","src","avatar","Img","alt","from","unread","text","fromNow","isOnline","createdAt","toDate","MessageForm","handleSubmit","setText","setImg","onSubmit","type","placeholder","value","onChange","e","target","htmlFor","files","accept","style","display","Message","msg","scrollRef","useRef","current","scrollIntoView","behavior","ref","media","console","log","Home","users","setUsers","setChat","img","msgs","setMsgs","currentUser","clientId","JSON","parse","localStorage","getItem","msgsRef","collection","query","orderBy","usersRef","q","where","querySnapshot","forEach","push","a","getDoc","docSnap","updateDoc","preventDefault","imgRef","Date","getTime","uploadBytes","snap","getDownloadURL","fullPath","dlUrl","url","addDoc","to","Timestamp","fromDate","senderName","senderGmail","email","setDoc","map","length","i","Loading","position","top","left","transform","AuthContext","createContext","AuthProvider","children","setUser","loading","setLoading","onAuthStateChanged","Provider","Navbar","history","useHistory","useContext","handleSignout","signOut","replace","window","clear","location","reload","Register","password","error","handleChange","createUserWithEmailAndPassword","result","setItem","stringify","message","disabled","Login","signInWithEmailAndPassword","Camera","xmlns","width","height","cursor","viewBox","fill","fillRule","d","clipRule","Delete","deleteImage","color","Profile","then","exists","uploadImg","avatarPath","deleteObject","confirm","toDateString","PrivateRoute","Component","component","rest","exact","render","props","ClickModel","scrool","open","setOpen","onCloseModal","userDetailsChat","onClose","classNames","modal","center","recevierName","recevierGmail","onInput","App","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d7106fdf.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyC4Bd_CXupIyNKZ9TR-arMSUnwOKrXixv8\",\r\n  authDomain: \"vender-chat-plugin.firebaseapp.com\",\r\n  databaseURL: \"https://vender-chat-plugin-default-rtdb.firebaseio.com\",\r\n  projectId: \"vender-chat-plugin\",\r\n  storageBucket: \"vender-chat-plugin.appspot.com\",\r\n  messagingSenderId: \"748089670667\",\r\n  appId: \"1:748089670667:web:d62cfd307513065db99b0e\",\r\n  measurementId: \"G-FJ3DNEN5JY\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\nexport { auth, db, storage };\r\n","export default __webpack_public_path__ + \"static/media/image1.f02b66c0.jpg\";","import React, { useEffect, useState } from \"react\";\r\nimport Img from \"../image1.jpg\";\r\nimport { onSnapshot, doc } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport Moment from \"react-moment\";\r\n\r\nconst User = ({ user1, user, selectUser, chat }) => {\r\n  const user2 = user?.uid;\r\n  const [data, setData] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\r\n    let unsub = onSnapshot(doc(db, \"lastMsg\", id), (doc) => {\r\n      setData(doc.data());\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`user_wrapper ${chat.name === user.name && \"selected_user\"}`}\r\n        onClick={() => selectUser(user)}\r\n      >\r\n        <div className=\"user_info\">\r\n          <div className=\"chat-page-user-info\">\r\n            <img src={user.avatar || Img} alt=\"avatar\" />\r\n            <div className=\"chat-page-user-name\">\r\n              <p>\r\n                {user.name}\r\n                {data?.from !== user1 && data?.unread && (\r\n                  <small className=\"unread\">New</small>\r\n                )}\r\n              </p>\r\n\r\n              {data && (\r\n                <p className=\"truncate\">\r\n                  {/*   <strong>{data.from === user1 ? \"Me:\" : null}</strong>*/}\r\n                  {data.text}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <p className=\"chat-page-user-info-p\">\r\n              <Moment fromNow>\r\n                {user.isOnline\r\n                  ? user.createdAt.toDate()\r\n                  : user.createdAt.toDate()}\r\n              </Moment>\r\n              <div\r\n                className={`user_status ${\r\n                  user.isOnline ? \"online\" : \"offline\"\r\n                }`}\r\n              ></div>\r\n            </p>\r\n            {/* <div\r\n              className={`user_status ${user.isOnline ? \"online\" : \"offline\"}`}\r\n           ></div>*/}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        onClick={() => selectUser(user)}\r\n        className={`sm_container ${chat.name === user.name && \"selected_user\"}`}\r\n      >\r\n        <img\r\n          src={user.avatar || Img}\r\n          alt=\"avatar\"\r\n          className=\"avatar sm_screen\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React from \"react\";\r\n\r\nconst MessageForm = ({ handleSubmit, text, setText, setImg }) => {\r\n  return (\r\n    <form className=\"\" onSubmit={handleSubmit}>\r\n      {/*   <label htmlFor=\"img\">\r\n        <Attachment />\r\n      </label>\r\n      <input\r\n        onChange={(e) => setImg(e.target.files[0])}\r\n        type=\"file\"\r\n        id=\"img\"\r\n        accept=\"image/*\"\r\n        style={{ display: \"none\" }}\r\n      />\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter message\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button className=\"btn\">Send</button>\r\n  </div> */}\r\n\r\n      <div className=\"chat-model-size-input-i\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter message\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n        />\r\n        <label htmlFor=\"img\">\r\n          <i className=\"fa fa-paperclip\" id=\"featured\" aria-hidden=\"true\"></i>\r\n        </label>\r\n        <input\r\n          onChange={(e) => setImg(e.target.files[0])}\r\n          type=\"file\"\r\n          id=\"img\"\r\n          accept=\"image/*\"\r\n          style={{ display: \"none\" }}\r\n        />\r\n        {/*    <button type=\"submit\" className=\"d-none\" disabled={!text}>\r\n          submit\r\n</button>*/}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default MessageForm;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport Moment from \"react-moment\";\r\n\r\nconst Message = ({ msg, user1, text }) => {\r\n  const scrollRef = useRef();\r\n\r\n  useEffect(() => {\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [msg]);\r\n\r\n  return (\r\n    <div className={`message_wrapper ${msg.from === user1 ? \"own\" : \"\"}`}>\r\n      <div\r\n        className={\r\n          msg.from === user1 ? \"chat-model-size-client\" : \"chat-model-size-help\"\r\n        }\r\n        ref={scrollRef}\r\n      >\r\n        {msg.media ? <img src={msg.media} alt={msg.text} /> : null}\r\n        <p> {msg.text}</p>\r\n        <span>\r\n          <Moment fromNow>{msg.createdAt.toDate()}</Moment>\r\n          {console.log(msg)}\r\n        </span>\r\n      </div>\r\n\r\n      {/* <p className={msg.from === user1 ? \"me\" : \"friend\"}>\r\n        {msg.media ? <img src={msg.media} alt={msg.text} /> : null}\r\n        {msg.text}\r\n        <br />\r\n        <small>\r\n          <Moment fromNow>{msg.createdAt.toDate()}</Moment>\r\n        </small>\r\n  </p>*/}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { db, auth, storage } from \"../firebase\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  onSnapshot,\r\n  addDoc,\r\n  Timestamp,\r\n  orderBy,\r\n  setDoc,\r\n  doc,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"firebase/firestore\";\r\nimport { ref, getDownloadURL, uploadBytes } from \"firebase/storage\";\r\nimport User from \"../components/User\";\r\nimport MessageForm from \"../components/MessageForm\";\r\nimport Message from \"../components/Message\";\r\n\r\nconst Home = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [chat, setChat] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const [img, setImg] = useState(\"\");\r\n  const [msgs, setMsgs] = useState([]);\r\n\r\n  const user1 = auth.currentUser.uid;\r\n\r\n  const clientId = JSON.parse(localStorage.getItem(\"id\"));\r\n\r\n  const user2 = clientId.id;\r\n  const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\r\n\r\n  const msgsRef = collection(db, \"messages\", id, \"chat\");\r\n  const q = query(msgsRef, orderBy(\"createdAt\", \"asc\"));\r\n  // var recentPostsRef = collection(db, \"/messages\");\r\n  // recentPostsRef.once(\"value\").then((snapshot) => {\r\n  //   this.setState({ stores: snapshot.val() });\r\n  // });\r\n\r\n  // useEffect(() => {\r\n  //   db.collection(\"lists\").onSnapshot((snapshot) =>\r\n  //     snapshot.docs.fiter((doc) =>\r\n  //       doc\r\n  //         .data()\r\n  //         .users.find(\r\n  //           (user) =>\r\n  //             user.name === userName && setMyList((prev) => [...prev, doc])\r\n  //         )\r\n  //     )\r\n  //   );\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(usersRef, where(\"uid\", \"not-in\", [user1]));\r\n    const unsub = onSnapshot(q, (querySnapshot) => {\r\n      let users = [];\r\n      querySnapshot.forEach((doc) => {\r\n        users.push(doc.data());\r\n      });\r\n      setUsers(users);\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   for (var i = 0; i < msgsRef._path.segments.length; i++) {\r\n  //     if (msgsRef._path.segments[i] === user1) {\r\n  //       console.log(3);\r\n  //       console.log(\"ITEM DATA :: \" + msgsRef._path.segments[i]);\r\n  //     } else {\r\n  //       console.log(2);\r\n  //     }\r\n  // }\r\n  // }, []);\r\n\r\n  const selectUser = async (user) => {\r\n    setChat(user);\r\n\r\n    const msgsRef = collection(db, \"messages\", id, \"chat\");\r\n    const q = query(msgsRef, orderBy(\"createdAt\", \"asc\"));\r\n\r\n    onSnapshot(q, (querySnapshot) => {\r\n      let msgs = [];\r\n      querySnapshot.forEach((doc) => {\r\n        msgs.push(doc.data());\r\n      });\r\n      setMsgs(msgs);\r\n    });\r\n\r\n    // get last message b/w logged in user and selected user\r\n    const docSnap = await getDoc(doc(db, \"lastMsg\", id));\r\n    // if last message exists and message is from selected user\r\n    if (docSnap.data() && docSnap.data().from !== user1) {\r\n      // update last message doc, set unread to false\r\n      await updateDoc(doc(db, \"lastMsg\", id), { unread: false });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!text) {\r\n      return false;\r\n    }\r\n    let url;\r\n    if (img) {\r\n      const imgRef = ref(\r\n        storage,\r\n        `images/${new Date().getTime()} - ${img.name}`\r\n      );\r\n      const snap = await uploadBytes(imgRef, img);\r\n      const dlUrl = await getDownloadURL(ref(storage, snap.ref.fullPath));\r\n      url = dlUrl;\r\n    }\r\n\r\n    addDoc(collection(db, \"messages\", id, \"chat\"), {\r\n      text,\r\n      from: user1,\r\n      to: user2,\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      media: url || \"\",\r\n      senderName: clientId.name,\r\n      senderGmail: clientId.email,\r\n    });\r\n\r\n    setDoc(doc(db, \"lastMsg\", id), {\r\n      text,\r\n      from: user1,\r\n      to: user2,\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      media: url || \"\",\r\n      unread: true,\r\n      senderName: clientId.name,\r\n      senderGmail: clientId.email,\r\n    });\r\n    setText(\"\");\r\n    setImg(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"home_container\">\r\n      <div className=\"users_container\">\r\n        <div className=\"chat-page-border\">\r\n          <label className=\"switch\">\r\n            <input type=\"checkbox\" className=\"switch-input\" />\r\n            <span className=\"switch-label\"></span>\r\n            <span className=\"switch-handle\"></span>\r\n          </label>\r\n          <p>Desktop Notification</p>\r\n        </div>\r\n        {users.map((user) => (\r\n          <User\r\n            key={user.uid}\r\n            user={user}\r\n            selectUser={selectUser}\r\n            user1={user1}\r\n            chat={chat}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"messages_container\">\r\n        {chat ? (\r\n          <>\r\n            <div className=\"chat-model-size-img\">\r\n              <img src=\"/static/media/image1.f02b66c0.jpg\" alt=\"img\" />\r\n\r\n              {\r\n                <div className=\"chat-model-size-status\">\r\n                  <p>{chat.name}</p>\r\n                  <span>1 min</span>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div className=\"messages\">\r\n              {msgs.length\r\n                ? msgs.map((msg, i) => (\r\n                    <Message key={i} msg={msg} user1={user1} text={text} />\r\n                  ))\r\n                : null}\r\n            </div>\r\n            <MessageForm\r\n              handleSubmit={handleSubmit}\r\n              text={text}\r\n              setText={setText}\r\n              setImg={setImg}\r\n            />\r\n          </>\r\n        ) : (\r\n          <h3 className=\"no_conv\">Select a user to start conversation</h3>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n// Sir I have tried my best but user list filter is not working please forgive me for this\r\n// I've searched all this and coded all this\r\n","import React from \"react\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div style={{ position: \"relative\" }}>\r\n      <h2\r\n        style={{\r\n          position: \"fixed\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        Loading...\r\n      </h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import { createContext, useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { auth } from \"../firebase\";\r\nimport Loading from \"../components/Loading\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    onAuthStateChanged(auth, (user) => {\r\n      setUser(user);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <AuthContext.Provider value={{ user }}>{children}</AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport { updateDoc, doc } from \"firebase/firestore\";\r\nimport { AuthContext } from \"../context/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n  const history = useHistory();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const handleSignout = async () => {\r\n    await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n      isOnline: false,\r\n    });\r\n    await signOut(auth);\r\n    history.replace(\"/login\");\r\n    window.localStorage.clear();\r\n    window.location.reload();\r\n  };\r\n  return (\r\n    <nav>\r\n      <h3>\r\n        <Link to=\"/\">Messenger</Link>\r\n      </h3>\r\n      <div>\r\n        {user ? (\r\n          <div>\r\n            <Link to=\"/dashboard\">Dashboard</Link>\r\n            <Link to=\"/profile\">Profile</Link>\r\n            <button className=\"btn\" onClick={handleSignout}>\r\n              Logout\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Link to=\"/register\">Register</Link>\r\n            <Link to=\"/login\">Login</Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useState } from \"react\";\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { setDoc, doc, Timestamp } from \"firebase/firestore\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Register = () => {\r\n  const [data, setData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: null,\r\n    loading: false,\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  const { name, email, password, error, loading } = data;\r\n\r\n  const handleChange = (e) => {\r\n    setData({ ...data, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setData({ ...data, error: null, loading: true });\r\n    if (!name || !email || !password) {\r\n      setData({ ...data, error: \"All fields are required\" });\r\n    }\r\n    try {\r\n      const result = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        password\r\n      );\r\n      await setDoc(doc(db, \"users\", result.user.uid), {\r\n        uid: result.user.uid,\r\n        name,\r\n        email,\r\n        createdAt: Timestamp.fromDate(new Date()),\r\n        isOnline: true,\r\n      });\r\n      setData({\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        error: null,\r\n        loading: false,\r\n        createdAt: Timestamp.fromDate(new Date()),\r\n      });\r\n      history.replace(\"/\");\r\n      localStorage.setItem(\"os-user\", JSON.stringify(data));\r\n      localStorage.setItem(\r\n        \"id\",\r\n        JSON.stringify({\r\n          id: 305,\r\n          name: \"jai Chouhan\",\r\n          email: \"jaichouhan@gmail.com\",\r\n        })\r\n      );\r\n    } catch (err) {\r\n      setData({ ...data, error: err.message, loading: false });\r\n    }\r\n  };\r\n  return (\r\n    <section>\r\n      <h3>Create An Account</h3>\r\n      <form className=\"form\" onSubmit={handleSubmit}>\r\n        <div className=\"input_container\">\r\n          <label htmlFor=\"name\">Name</label>\r\n          <input type=\"text\" name=\"name\" value={name} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"input_container\">\r\n          <label htmlFor=\"email\">Email</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"input_container\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        {error ? <p className=\"error\">{error}</p> : null}\r\n        <div className=\"btn_container\">\r\n          <button className=\"btn\" disabled={loading}>\r\n            {loading ? \"Creating ...\" : \"Register\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState } from \"react\";\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { updateDoc, doc } from \"firebase/firestore\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  const [data, setData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    error: null,\r\n    loading: false,\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  const { email, password, error, loading } = data;\r\n\r\n  const handleChange = (e) => {\r\n    setData({ ...data, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setData({ ...data, error: null, loading: true });\r\n    if (!email || !password) {\r\n      setData({ ...data, error: \"All fields are required\" });\r\n    }\r\n    try {\r\n      const result = await signInWithEmailAndPassword(auth, email, password);\r\n\r\n      await updateDoc(doc(db, \"users\", result.user.uid), {\r\n        isOnline: true,\r\n      });\r\n      setData({\r\n        email: \"\",\r\n        password: \"\",\r\n        error: null,\r\n        loading: false,\r\n      });\r\n      history.replace(\"/\");\r\n      localStorage.setItem(\"os-user\", JSON.stringify(data));\r\n      localStorage.setItem(\r\n        \"id\",\r\n        JSON.stringify({\r\n          id: 305,\r\n          name: \"jai Chouhan\",\r\n          email: \"jaichouhan@gmail.com\",\r\n        })\r\n      );\r\n    } catch (err) {\r\n      setData({ ...data, error: err.message, loading: false });\r\n    }\r\n  };\r\n  return (\r\n    <section>\r\n      <h3>Log into your Account</h3>\r\n      <form className=\"form\" onSubmit={handleSubmit}>\r\n        <div className=\"input_container\">\r\n          <label htmlFor=\"email\">Email</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"input_container\">\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        {error ? <p className=\"error\">{error}</p> : null}\r\n        <div className=\"btn_container\">\r\n          <button className=\"btn\" disabled={loading}>\r\n            {loading ? \"Logging in ...\" : \"Login\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nconst Camera = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{ width: \"25px\", height: \"25px\", cursor: \"pointer\" }}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Camera;\r\n","import React from \"react\";\r\n\r\nconst Delete = ({ deleteImage }) => {\r\n  return (\r\n    <svg\r\n      onClick={deleteImage}\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{\r\n        width: \"25px\",\r\n        height: \"25px\",\r\n        cursor: \"pointer\",\r\n        color: \"#f24957\",\r\n      }}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Delete;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Camera from \"../components/svg/Camera\";\r\nimport Img from \"../image1.jpg\";\r\nimport { storage, db, auth } from \"../firebase\";\r\nimport {\r\n  ref,\r\n  getDownloadURL,\r\n  uploadBytes,\r\n  deleteObject,\r\n} from \"firebase/storage\";\r\nimport { getDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport Delete from \"../components/svg/Delete\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Profile = () => {\r\n  const [img, setImg] = useState(\"\");\r\n  const [user, setUser] = useState();\r\n  const history = useHistory(\"\");\r\n\r\n  useEffect(() => {\r\n    getDoc(doc(db, \"users\", auth.currentUser.uid)).then((docSnap) => {\r\n      if (docSnap.exists) {\r\n        console.log(docSnap.data());\r\n        setUser(docSnap.data());\r\n      }\r\n    });\r\n\r\n    if (img) {\r\n      const uploadImg = async () => {\r\n        const imgRef = ref(\r\n          storage,\r\n          `avatar/${new Date().getTime()} - ${img.name}`\r\n        );\r\n        try {\r\n          if (user.avatarPath) {\r\n            await deleteObject(ref(storage, user.avatarPath));\r\n          }\r\n          const snap = await uploadBytes(imgRef, img);\r\n          const url = await getDownloadURL(ref(storage, snap.ref.fullPath));\r\n\r\n          await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n            avatar: url,\r\n            avatarPath: snap.ref.fullPath,\r\n          });\r\n\r\n          setImg(\"\");\r\n        } catch (err) {\r\n          console.log(err.message);\r\n        }\r\n      };\r\n      uploadImg();\r\n    }\r\n  }, [img]);\r\n\r\n  const deleteImage = async () => {\r\n    try {\r\n      const confirm = window.confirm(\"Delete avatar?\");\r\n      if (confirm) {\r\n        await deleteObject(ref(storage, user.avatarPath));\r\n\r\n        await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n          avatar: \"\",\r\n          avatarPath: \"\",\r\n        });\r\n        history.replace(\"/\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n  };\r\n  return user ? (\r\n    <section>\r\n      <div className=\"profile_container\">\r\n        <div className=\"img_container\">\r\n          <img src={user.avatar || Img} alt=\"avatar\" />\r\n          <div className=\"overlay\">\r\n            <div>\r\n              <label htmlFor=\"photo\">\r\n                <Camera />\r\n              </label>\r\n              {user.avatar ? <Delete deleteImage={deleteImage} /> : null}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                id=\"photo\"\r\n                onChange={(e) => setImg(e.target.files[0])}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"text_container\">\r\n          <h3>{user.name}</h3>\r\n          <p>{user.email}</p>\r\n          <hr />\r\n          <small>Joined on: {user.createdAt.toDate().toDateString()}</small>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  ) : null;\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useContext } from \"react\";\r\nimport { AuthContext } from \"../context/auth\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const { user } = useContext(AuthContext);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      exact\r\n      render={(props) =>\r\n        user === null ? <Redirect to=\"/login\" /> : <Component {...props} />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"react-responsive-modal/styles.css\";\r\nimport { Modal } from \"react-responsive-modal\";\r\nimport { auth, db } from \"../firebase\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  onSnapshot,\r\n  orderBy,\r\n  query,\r\n  Timestamp,\r\n} from \"firebase/firestore\";\r\nimport Moment from \"react-moment\";\r\nimport Img from \"../image1.jpg\";\r\nconst ClickModel = () => {\r\n  const scrool = useRef();\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const [chat, setChat] = useState([]);\r\n  const [user, setUser] = useState();\r\n\r\n  const onOpenModal = () => setOpen(true);\r\n  const onCloseModal = () => setOpen(false);\r\n  const userDetailsChat = JSON.parse(localStorage.getItem(\"os-user\"));\r\n\r\n  const user1 = auth.currentUser.uid;\r\n  // const users = auth.onAuthStateChanged((user) => {\r\n  //   console.log(user.uid);\r\n  // });\r\n\r\n  const clientId = JSON.parse(localStorage.getItem(\"id\"));\r\n\r\n  useEffect(() => {\r\n    getDoc(doc(db, \"users\", auth.currentUser.uid)).then((docSnap) => {\r\n      if (docSnap.exists) {\r\n        setUser(docSnap.data());\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scrool.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [text]);\r\n\r\n  useEffect(() => {\r\n    const user2 = clientId && clientId.id;\r\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\r\n    const msgsRef = collection(db, \"messages\", id, \"chat\");\r\n    const q = query(msgsRef, orderBy(\"createdAt\", \"asc\"));\r\n\r\n    onSnapshot(q, (querySnapshot) => {\r\n      let msgs = [];\r\n      querySnapshot.forEach((doc) => {\r\n        msgs.push(doc.data());\r\n      });\r\n      setChat(msgs);\r\n    });\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const user2 = clientId.id;\r\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\r\n    addDoc(collection(db, \"messages\", id, \"chat\"), {\r\n      text,\r\n      from: user1,\r\n      to: user2,\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      senderGmail: userDetailsChat.email,\r\n      recevierName: clientId.name,\r\n      recevierGmail: clientId.email,\r\n    });\r\n    setText(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {open === true ? (\r\n        <Modal\r\n          open={open}\r\n          onClose={onCloseModal}\r\n          classNames={{ modal: \"message-pop-model\" }}\r\n          center\r\n        >\r\n          <div className=\"chat-model-size\">\r\n            <div className=\"chat-model-size-img\">\r\n              <img src={Img} alt=\"img\" />\r\n              <div className=\"chat-model-size-status\">\r\n                <p>{user && user.name}</p>\r\n                <span>\r\n                  <Moment fromNow>{user && user.createdAt.toDate()}</Moment>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"chat-model-size-height\">\r\n              {chat &&\r\n                chat.map((data, i) => (\r\n                  <div\r\n                    key={i}\r\n                    className={\r\n                      user1\r\n                        ? \"chat-model-size-client-model\"\r\n                        : \"chat-model-size-help-model\"\r\n                    }\r\n                    style={{ position: \"relative\" }}\r\n                    ref={scrool}\r\n                  >\r\n                    {data.media ? (\r\n                      <img src={data.media} alt={data.text} />\r\n                    ) : null}\r\n\r\n                    <p>{data.text}</p>\r\n                    <span>\r\n                      <Moment fromNow>{data.createdAt.toDate()}</Moment>\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"chat-model-size-position\">\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"chat-model-size-input d-flex\">\r\n                  <div className=\"chat-model-size-input-i\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Say something\"\r\n                      value={text}\r\n                      onInput={(e) => setText(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"\">\r\n                    <button type=\"submit\" disabled={!text}>\r\n                      Send\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      ) : (\r\n        <div className=\"app\">\r\n          <div className=\"open-btn-dot\"></div>\r\n          <button type=\"button\" className=\"open-btn\" onClick={onOpenModal}>\r\n            CHAT NOW\r\n          </button>\r\n        </div>\r\n      )}\r\n      {open ? (\r\n        <div className=\"close-model\" onClick={onCloseModal}>\r\n          <i className=\"fa fa-close\"></i>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClickModel;\r\n\r\n//     \"chat-model-size-client\"\r\n// \"chat-model-size-help\"\r\n","import \"./App.css\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport Register from \"./pages/Register\";\r\nimport Login from \"./pages/Login\";\r\nimport Profile from \"./pages/Profile\";\r\nimport AuthProvider from \"./context/auth\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport ClickModel from \"./pages/ClickModel\";\r\n\r\nfunction App() {\r\n  return (\r\n    <AuthProvider>\r\n      <BrowserRouter>\r\n        <Navbar />\r\n        <Switch>\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <PrivateRoute exact path=\"/profile\" component={Profile} />\r\n          <PrivateRoute exact path=\"/dashboard\" component={Home} />\r\n          <PrivateRoute exact path=\"/\" component={ClickModel} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}